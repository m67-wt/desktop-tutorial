<script>
   let myGlobalX = 0
   let myClock
   let myScore = 10
   let myGun01
   let myGun02
   let myShooting = 1

function myHitOther(my1,my2){
   left1   = parseInt(document.getElementById(my1).style.left)
   right1  = left1 + parseInt(document.getElementById(my1).style.width)
   top1    = parseInt(document.getElementById(my1).style.top)   
   bottom1 = top1   + parseInt(document.getElementById(my1).style.height)
   left2   = parseInt(document.getElementById(my2).style.left)
   right2  = left2 + parseInt(document.getElementById(my2).style.width)
   top2    = parseInt(document.getElementById(my2).style.top)   
   bottom2 = top2   + parseInt(document.getElementById(my2).style.height)
   if ((right1 >= left2) && (bottom1 >= top2) && (left1 <= right2) && (top1 <= bottom2)){
       return true
   }
}

function myCheckHit(){
   document.all.myText01.value = myScore
   if (myHitOther('myImg01','myImg02')){
      document.getElementById('myImg01').style.left = '20px'
      myScore -= 1
   }   
   if (myHitOther('myImg01','myImg03')){
      document.getElementById('myImg01').style.left = '20px'
      myScore -= 1
   }   
   if (myHitOther('myBullet01','myImg03')){
      clearInterval(myGun01)
      document.getElementById('myBullet01').style.left = '-200px'
      myScore += 1
   }   
   if (myHitOther('myBullet02','myImg03')){
      clearInterval(myGun02)
      document.getElementById('myBullet02').style.left = '-200px'
      myScore += 1
   }   
   if (myScore <= 0){
    alert('Game Over')
    location.reload()
   }
   if (myHitOther('myImg01','myImg04')){
      alert('You Win!')
      location = 'https://www.google.ca'
   }
}

function myShoot(){
    if (myShooting > 2){myShooting = 1}
    if (myShooting == 2){
        myShooting += 1
        document.getElementById('myBullet02').style.left = document.getElementById('myImg01').style.left
        document.getElementById('myBullet02').style.top  = document.getElementById('myImg01').style.top
        clearInterval(myGun02)
        myGun02 = setInterval(function(){
            document.getElementById('myBullet02').style.left = parseInt(document.getElementById('myBullet02').style.left) + 10 + 'px'
            myCheckHit() 
        }, 20)
    }
    if (myShooting == 1){
        myShooting += 1
        document.getElementById('myBullet01').style.left = document.getElementById('myImg01').style.left
        document.getElementById('myBullet01').style.top  = document.getElementById('myImg01').style.top
        clearInterval(myGun01)
        myGun01 = setInterval(function(){
            document.getElementById('myBullet01').style.left = parseInt(document.getElementById('myBullet01').style.left) + 10 + 'px'
            myCheckHit() 
        }, 20)
    }
}
</script>

<body id="myBody" style="margin:0; padding:0; background-image: url('assets/pixel_light_grey_mosaic.jpg'); background-size: cover; background-repeat: no-repeat; background-attachment: fixed; color:black;" onkeydown="{
   let key = event.key.toLowerCase()
   let p = document.getElementById('myImg01')
   if (key == 'w') { p.style.top = parseInt(p.style.top) - 10 + 'px' }
   if (key == 'a') { p.style.left = parseInt(p.style.left) - 10 + 'px' }
   if (key == 's') { p.style.top = parseInt(p.style.top) + 10 + 'px' }
   if (key == 'd') { p.style.left = parseInt(p.style.left) + 10 + 'px' }
   if (key == ' ') { myShoot() }
   myCheckHit()
}">

<h1 align=center>T4A06 Game by Fred</h1>
<div align=center>
   <input id="myText01" type=text value="" size=30 placeholder="Score">
   <p>WASD to Move | Space to Shoot</p>
</div>

<div id="myFloor" style="position:fixed; bottom:0; left:0; width:100%; height:80px; background-image: url('assets/lvl_floor texture.png'); background-repeat: repeat-x;"></div>

<img id="myImg01" src="assets/charater.png" style="position:absolute; width:80px; height:80px; left: 10px; top:200px;">

<img id="myImg02" src="assets/charater.png" style="position:absolute; width:80px; height:80px; left:300px; top:200px;">
<img id="myImg03" src="assets/charater.png" style="position:absolute; width:80px; height:80px; left:500px; top:200px;">
<img id="myImg04" src="assets/charater.png" style="position:absolute; width:80px; height:80px; left:600px; top:400px;">

<img id="myBullet01" src="assets/charater.png" style="position:absolute; width:15px; height:15px; left: -200px; top:0px;">
<img id="myBullet02" src="assets/charater.png" style="position:absolute; width:15px; height:15px; left: -200px; top:0px;"> 

</body>
